<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>烘培美厨</title>
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0">
	<script type="text/javascript" src = "js/jquery-3.1.1.min.js"></script>
	<script src = "js/烘培美厨.js"></script>
	<script src="js/zepto.min.js"></script>
	<link rel="stylesheet" href="css/烘培美厨.css">
	<link rel="stylesheet" href="css/loadmore.css">
</head>
<body>
	<!--  -->
	<!--页面标题 -->
	<div class = "head_box">
		<a href="#" class ="back"></a>
		<div class= "page_title">烘焙美厨</div>
	</div>
	<!-- 导航栏 -->
	<nav class = "nav">
		<a href="#" class = "home"><b></b>首页</a>
		<a href="#" class = "circe"><b></b>圈圈</a>
		<a href="#" class = "show"><p></p></a>
		<a href="#" class = "Buy_goods"><b></b>购好货</a>
		<a href="#" class = "my"><b></b>我的</a>
	</nav>
	<div class = "nav_box">
		<ul class="sencond_nav">
			<li>
				<a href="#">全部</a>
			</li>
			<li>
				<a href="#">烘培原料</a>
			</li>
			<li>
				<a href="#">烘培辅料</a>
			</li>
			<li>
				<a href="#">烘培模具</a>
			</li>
			<li>
				<a href="#">烘培工具</a>
			</li>
			<li>
				<a href="#">中式面点</a>
			</li>
			<li>
				<a href="#">西式烘培</a>
			</li>
		</ul>
	</div>
	<!-- 商品列表 -->
	<div class ="big_box">
		<div class = "list_box">
			<div class = 'goods_list'>
				<a href="#">
					<img src="imags/300_0aa169a448de1926ca06353f38d857c8.jpg" alt="">
					<div class = "text">
						<p class= "commodity_name">烘焙原料安佳 淡奶油 250ml 蛋糕奶油</p>
						<p class="price">&yen;25.8</p>
						<p class="sum">117人已付款</p>
					</div>
				</a>
			</div>
			<div class = 'goods_list'>
				<a href="#">
					<img src="imags/300_e79ef4422335382e0d40bf3c86d08423.jpg" alt="">
					<div class = "text">
						<p class= "commodity_name">烘焙必备 总统牌 无盐黄油块 200g</p>
						<p class="price">&yen;27.9</p>
						<p class="sum">362人已付款</p>
					</div>
				</a>
			</div>
	</div>
	<div class = "list_box">
			<div class = 'goods_list'>
				<a href="#">
					<img src="imags/300_1b34e5ec77f1486764e87a1f9f9cc1d3.jpg" alt="">
					<div class = "text">
						<p class= "commodity_name">烘焙必备 总统 盐味黄油卷 250g</p>
						<p class="price">&yen;34.7</p>
						<p class="sum">39人已付款</p>
					</div>
				</a>
			</div>
			<div class = 'goods_list'>
				<a href="#">
					<img src="imags/300_0aa169a448de1926ca06353f38d857c8.jpg" alt="">
					<div class = "text">
						<p class= "commodity_name">奈特兰 淡味黄油 烘焙原料辅料454g</p>
						<p class="price">&yen;25.8</p>
						<p class="sum">1201人已付款<span>包邮</span></p>
					</div>
				</a>
			</div>
	</div>
	<div class = "list_box">
			<div class = 'goods_list'>
				<a href="#">
					<img src="imags/300_339bb1a4daeed3e33ad80b3512738cb1.jpg" alt="">
					<div class = "text">
						<p class= "commodity_name">安佳 动物性淡奶油1L</p>
						<p class="price">&yen;48</p>
						<p class="sum">1339人已付款<span>包邮</span></p>
					</div>
				</a>
			</div>
			<div class = 'goods_list'>
				<a href="#">
					<img src="imags/300_7bf2e41d3ecca4462f98709b59f41488.jpg" alt="">
					<div class = "text">
						<p class= "commodity_name">妙可蓝多 马苏里拉芝士/奶酪450g</p>
						<p class="price">&yen;26.8</p>
						<p class="sum">1940人已付款</p>
					</div>
				</a>
			</div>
	</div>
	<div class = "list_box">
			<div class = 'goods_list'>
				<a href="#">
					<img src="imags/300_e49cde29549797a111ccd58d0cc1c203.jpg" alt="">
					<div class = "text">
						<p class= "commodity_name">7式 葡式蛋挞皮蛋挞半成品烘焙原料30个装</p>
						<p class="price">&yen;15.8</p>
						<p class="sum">1329人已付款</p>
					</div>
				</a>
			</div>
			<div class = 'goods_list'>
				<a href="#">
					<img src="imags/300_0aa169a448de1926ca06353f38d857c8.jpg" alt="">
					<div class = "text">
						<p class= "commodity_name">新良 魔堡蛋糕粉低筋面粉1kg</p>
						<p class="price">&yen;9.9</p>
						<p class="sum">1609人已付款</p>
					</div>
				</a>
			</div>
	</div>
	<div class = "list_box">
			<div class = 'goods_list'>
				<a href="#">
					<img src="imags/300_a8b6d57e1eb24514bf6505dab3c642f0.jpg" alt="">
					<div class = "text">
						<p class= "commodity_name">安佳 稀奶油淡奶油250ml</p>
						<p class="price">&yen;25.8</p>
						<p class="sum">1339人已付款<span>包邮</span></p>
					</div>
				</a>
			</div>
			<div class = 'goods_list'>
				<a href="#">
					<img src="imags/300_1ec3eb8497310dad45ecf11c0e382c88.jpg" alt="">
					<div class = "text">
						<p class= "commodity_name">雀巢 淡奶油250ml</p>
						<p class="price">&yen;9.9</p>
						<p class="sum">2130人已付款</p>
					</div>
				</a>
			</div>
		</div>


	</div>
	
	<!-- 加载更多 -->

	<div class = "more">加载更多 <span></span></div>
	<!-- footer尾页 -->
	<footer class ="footer">
		<p class ="first"><a href="#" class = "go_top">回到顶部</a></p>
		<div class = "foot
		er_nav">
			<a href="#" class = 'border_right'>触屏版</a>
			<a href="#" class = 'border_right'>网页版</a>
			<a href="#">手机客户端</a>
		</div>
		<p id="information">豆果网 京ICP证111032号 <a href="#">食材大全</a></p>
	</footer>
	<div class = "foottittle">
		<div class = "btn_logo"></div>
		<div class = "rigth_text">
			<span>下载APP</span><br>
			<span>看世界名厨直播学做菜</span>

		</div>
		<a href="#" class = "downapp">立刻试试</a>
	</div>

</body>
<script>
$(function(){
	$(".more").show();
	/*初始化*/
	var counter = 0; /*计数器*/
	var pageStart = 0; /*.offset*/
	var pageSize = 0; /*size*/
	
	/*首次加载*/
	getData(pageStart, pageSize);
	
	/*监听加载更多*/
	$(document).on('click', '.more', function(){
		counter ++;
		pageStart = counter * pageSize;
		
		getData(pageStart, pageSize);
	});
    
	
	function getData(offset,size){

		$.ajax({
			type: 'GET',
			url: 'json/blog.json'+ '?' + offset + '/' + size, //这里offset,size无作用，仅方便调试
			dataType: 'json',
			success: function(reponse){

				var data = reponse.list;
				var sum = reponse.list.length;

				var result;
				
				/************业务逻辑块：实现拼接html内容并append到页面*****************/
				
				//console.log(offset , size, sum);
				
				/*如果剩下的记录数不够分页，就让分页数取剩下的记录数
				* 例如分页数是5，只剩2条，则只取2条
				*
				* 实际MySQL查询时不写这个不会有问题
				*/
				console.log(data[0].src,"66666666"+sum);
				console.log(data);
				/*使用for循环模拟SQL里的limit(offset,size)*/
				
				for(var i = 0,j = 1; i<sum; i=i+2,j=j+2){
					
						console.log(i,j);
						result ="<div class='list_box'><div class = 'goods_list'><a href='#'><img src='"+data[i].src+"'><div class = 'text'><p class= 'commodity_name'>"+data[i].commodity_name+"</p><p class='price'>"+data[i].sum+"</p><p class='sum'>"+data[i].price+"</p></div></a></div><div class = 'goods_list'><a href='#'><img src='"+data[j].src+"'><div class = 'text'><p class= 'commodity_name'>"+data[j].commodity_name+"</p><p class='price'>"+data[j].price+"</p><p class='sum'>"+data[j].sum+"</p></div></a></div></div>";
						$('.big_box').append(result);
						console.log(data[i].src,data[j].src);

					
					}
				
				

				
				/*******************************************/
	
				/*隐藏more*/
				

			
					
				
			},
			error: function(xhr, type){
				alert('Ajax error!');
			}
		});
	}
});

</script>
</html>